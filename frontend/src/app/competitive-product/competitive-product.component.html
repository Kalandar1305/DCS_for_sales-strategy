<div class="container-md">

    <div class="h3">Current Product Details</div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-6" *ngFor="let specification of product?.specifications | keyvalue">
                <p >
                    <span class="fw-bold">{{specification.key +"" | titlecase}}</span>: {{specification.value }}
                </p>
            </div>
            <!-- <div class="col">
                <p class="text-secondary">
                    RAM: {{product.specifications?.ram}}
                </p>
            </div> -->
        </div>
    </div>
    <div class="d-flex justify-content-between mb-2">
        <div class="h3">Competitve Product Analysis</div>
    </div>
    <table class="table">
        <thead>
            <tr class="d-flex ">
                <th scope="col" class="col">#</th>
                <th scope="col" class="col-1">Company</th>
                <th scope="col" class="col-7">Product Name</th>
                <th scope="col" class="col-1">Price</th>
                <th scope="col" class="col-1">Average Rating</th>
                <th scope="col" class="col-1">Show Features</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div *ngFor="let product of products;let  i = index ">
        <ngb-accordion #acc="ngbAccordion" class="p-0" activeIds="ngb-panel-0">
            <ngb-panel id="custom-panel-1">
                <ng-template ngbPanelHeader let-opened="opened">
                    <div class="accordion-button custom-header hide-arrow gap-2" [class.collapsed]="!opened">
                        <div class="col">
                            {{ i+1}}
                        </div>
                        <div class="col-1">
                            {{product.company}}
                        </div>
                        <div class="col-7">
                            {{product.title}}
                        </div>
                        <div class="col-1 text-center">
                            {{product.specifications.price | currency:"INR":"symbol"}}
                        </div>
                        <div class="col-1 text-center">
                            {{product.averageRating | number:'.2'}}
                        </div>

                        <div class="col-1">
                            <button ngbPanelToggle class="btn btn-link p-0">Show More</button>

                        </div>
                    </div>
                </ng-template>
                <ng-template ngbPanelContent>
                    <div class="container">
                        <div class="row">
                            <div class="col-6 my-1" *ngFor="let specification of product.specifications | keyvalue">
                                <span class="fw-bold">
                                    {{ specification.key +" " | titlecase}}:
                                </span>
                                {{specification.value}}
                            </div>

                            <div class="col-6 my-1">
                                <span class="fw-bold">
                                    FlipkartURL:
                                </span>
                                <a [href]="product.flipkartUrl" class="link" target="_blank">Flipkart</a> ({{product.flipkartRating}})
                            </div>

                            <div class="col-6 my-1">
                                <span class="fw-bold">
                                    AmazonURL:
                                </span>
                                <a [href]="product.amazonUrl" class="link" target="_blank">Amazon</a> ({{product.amazonRating}})
                            </div>
                        </div>
                    </div>
                </ng-template>
            </ngb-panel>
        </ngb-accordion>
    </div>
    <!-- <app-product *ngFor="let product of products" [product]="product" ></app-product> -->
</div>